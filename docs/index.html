<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Home</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Home</h1>

    



    


    <h3> </h3>










    




    <section>
        <article><h1>FileStorage : Storage</h1><p>FileStorage is an abstraction for storing key/value pairs on the file system.
It uses the NodeJS <code>fs</code> module to persist the data.</p>
<p>It implements the <a href="https://html.spec.whatwg.org/multipage/webstorage.html#the-storage-interface">Storage</a> interface.</p>
<h2>Getting started</h2><p>FileStorage is intended to be used in NodeJS environment.
It abstracts the <code>fs</code> module API to a simpler one like the local and session storage.</p>
<p>The FileStorage API is comprised of <code>getItem()</code>, <code>setItem()</code>, <code>removeItem()</code>, <code>key()</code>, <code>clear()</code> and <code>length</code>.</p>
<pre class="prettyprint source lang-javascript"><code>const FileStorage = require('file-storage').FileStorage;
const storage = new FileStorage('path/to/data/directory');</code></pre><p>In order to use the <code>FileStorage</code>, you will have to instantiate a new object.
The constructor takes the path to the directory in which to store the files.</p>
<pre class="prettyprint source lang-javascript"><code>const scientists = [
    { id: 1, firstName: 'Marie', lastName: 'Curie', birthDate: '1867-11-07' },
    { id: 2, firstName: 'Albert', lastName: 'Einstein', birthDate: '1879-03-14' },
];
storage.setItem('scientists', JSON.stringify(scientists));</code></pre><p>Setting the <code>scientists</code> key will cause the <code>path/to/data/directory/scientists</code> file to be created
with the serialized array of employees.
The default encoding is UTF-8.
The files have no extension by default.</p>
<p>The library does not serialize the passed data in any format.
This is to let you choose which method to use to serialize your data.
As the data is stored as text, it is coerced to a string.
Thus, passing an object will store <code>[object Object]</code>.</p>
<pre class="prettyprint source lang-javascript"><code>storage.setItem('myObject', { pi: 3.14 }, function (err) {
    if (err) throw err;
    storage.getItem('myObject', function (err, data) {
        if (err) throw err;
        console.log(data); // &quot;[object Object]&quot;
    });
});</code></pre><p>The <code>FileStorage</code> methods take an extra parameter which is a callback function.
This fits into the NodeJS API style.
The first argument of the callback function is the potential error.
For the <code>getItem()</code> method, the callback function takes the data as a second argument.</p>
<h2>Why FileStorage?</h2><p>I wanted a software component that can read/write files in the file system.
Using the NodeJS <code>fs</code> module in the application code would have created a strong dependency to that particular technology.</p>
<p>In order to invert that dependency, the persistance layer must implement an interface from the application layer.
This is exactly what this library is all about.</p>
<p>Because the <code>FileStorage</code> implements the <code>Storage</code> interface,
the application code can rely on that implementation without tightly coupling itself.</p>
<p>See <a href="https://en.wikipedia.org/wiki/Dependency_inversion_principle">Dependency inversion principle</a>.</p>
<h2>API</h2><p>The online documentation is available at
<a href="https://thomaskerbrat.github.io/file-storage/">thomaskerbrat.github.io/file-storage</a>.</p>
<h2>Roadmap</h2><p>In no particular order:</p>
<ul>
<li>Configure encoding.</li>
<li>Configure extension for the saved files. (They currently have no extension, only the key itself.)</li>
<li>Normalize the key before reading, writing or deleting the file.</li>
<li>Configure optional hooks for (de-)serializing data before read/write.</li>
<li>Initialize the internal keys array at instantiation.</li>
</ul>
<h1>License</h1><p>MIT</p>
<p>(Psss, you are just required to cite my name. That's all. Have fun :wink:)</p></article>
    </section>






</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-file-storage.html">file-storage</a></li><li><a href="module-utils.html">utils</a></li></ul><h3>Classes</h3><ul><li><a href="module-file-storage-FileStorage.html">FileStorage</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.3</a> on Sun Dec 18 2016 12:23:39 GMT+0100 (CET)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>